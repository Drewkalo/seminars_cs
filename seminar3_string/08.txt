После ввода и Enter в буфере ввода остаётся символ \n. При вызове scanf("%[^\n]", str) этот символ сразу считывается, и scanf прекращается.
Это приводит к неопределённому поведению при выводе str.

Исправляется, если очистить буфер ввода после считывания числа
или
исправить формат строки для чтения всех символов до символа новой строки.